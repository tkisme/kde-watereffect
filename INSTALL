Requirements
============

Cmake, build tools.

Developing files for: KDE4 - base/workspace, KDE4 - lib, QT4 and OpenGL.
(For example packages: kdebase-workspace-dev, kdelibs5-dev, libqt4-dev and mesa-common-dev in Ubuntu.)


Building
========

1) Enter directory where to place build files.
For example in build directory in watereffect directory:

$ cd watereffect-0.0.1
$ mkdir build
$ cd build


2) Optionally - set environment variables if necessary.
For example I use KDE3.5 and have QT4 and KDE4 installed from svn in unusual directories, so I must set:

$ export QTDIR=/usr/lib/qt4svn
$ export PATH=$QTDIR/bin:$PATH
$ export LD_LIBRARY_PATH=$QTDIR/lib:$LD_LIBRARY_PATH
$ export PKG_CONFIG_PATH=$QTDIR/lib:$PKG_CONFIG_PATH
$ export KDEDIR=/usr/lib/kde4svn
$ export PATH=$KDEDIR/bin:$PATH
$ export LD_LIBRARY_PATH=$KDEDIR/lib:$LD_LIBRARY_PATH
$ export QT_PLUGIN_PATH=$KDEDIR/lib/kde4/plugins
$ export KDEDIRS=$KDEDIR
$ export KDEHOME=$HOME/.kde4

Another sample - Kubuntu 8.04 with KDE4 from ppa.launchpad.net:

$ export QTDIR=/usr/lib/qt4
$ .....
$ export KDEDIR=/usr/lib/kde4
$ ....
$ export QT_PLUGIN_PATH=$KDEDIR/lib/kde4/plugins
$ ....

If KDE4 is "natural" for your distribution (e.q. in Kubuntu 8.10), you can skip this step.


3) Configure.
Watereffect use Cmake as well as whole KDE. In fact I used some CMakeLists.txt from KDE and I hope this effect will be added to the official effects in future.
So, run cmake in your build folder, argument it and point it to the source (upper dir):

$ cmake -DCMAKE_BUILD_TYPE=release -DCMAKE_INSTALL_PREFIX=/usr ..

The prefix can be something else, e.q. /usr/lib/kde4svn or /usr/lib/kde for examples above.


4) Finally build.
Unexpectedly:

$ make


Install
=======

Usually you need to be root to install files into /usr* directories..

# make install


Cleanup
=======

You can delete temporary files by 'make clean', alternatively delete whole build directory.


Run
===

Now there should be new item in your kwin effects settings. If not, try run kbuildsycoca (or kbuildsycoca4) that KDE learned about the new .desktop files.
To see new effect in action, restart kwin. Run:
$ kwin --replace


Have a fun.